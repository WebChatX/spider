<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>example01</title>
    <link rel="stylesheet" href="./index.css" />
    <script src="../../node_modules/@spider/client/dist/SpiderClient.min.js"></script>
    <script src="../../SaberX.js"></script>
  </head>
  <body>
    <div class="title">
      <h2>Spider案例01</h2>
      <p>此案例用于验证Spider框架基础的WebSocket通讯能力。</p>
      <p>内容包括：</p>
      <ol>
        <li>登录、登出功能</li>
        <li>发送、接收自定义消息</li>
      </ol>
    </div>

    <div class="login">
      <p>请选择一种身份进行登录：</p>
      <div class="select-user">
        <input type="radio" name="user" value="鸣鸣酱" checked />
        <span>鸣鸣酱</span>
      </div>
      <div class="select-user">
        <input type="radio" name="user" value="阿帆" />
        <span>阿帆</span>
      </div>

      <button class="login-btn">登录</button>
    </div>

    <div class="container">
      <div class="login-before">世界因你而不同</div>
      <div class="login-loading">
        <img data-src="./assets/loading.gif" />
      </div>

      <div class="header">鸣鸣酱</div>
      <div class="main"></div>
      <div class="footer">
        <div class="input-box">
          <input type="text" />
        </div>
        <div class="send-btn">发送</div>
      </div>
    </div>

    <script>
      // 登录用户信息
      const userData = {
        username: ""
      };
      // 聊天消息
      const messageList = [
        { sender: "鸣鸣酱", content: "你好啊" }, 
        { sender: "阿帆", content: "很高兴认识你" }
      ];

      const loginBtnEl = $(".login-btn");

      loginBtnEl.addEventListener("click", () => {
        // 开始加载图片
        const imgEl = $(".login-loading img");
        imgEl.setAttribute("src", imgEl.getAttribute("data-src"));
        imgEl.removeAttribute("data-src");

        // 开始显示加载动画
        $(".login-before").style.display = "none";

        // 开始登录
        setTimeout(() => {
          $(".login-loading").style.display = "none";

          // 获取用户名
          const username = [...$$(".select-user input")].find(
            (item) => item.checked
          ).defaultValue;

          
        }, 3000);
      });
    </script>
  </body>
</html>
